dist: trusty
language: ruby
cache: bundler
sudo: required
bundler_args: --without production
rvm:
  - 2.5
  - 2.6

services:
  - mysql

branches:
  only:
    - master
    - develop

before_install:
  - sudo service mysql restart
  - gem update --system
  - gem install bundler

before_script:
  - bundle exec rake keycard:migrate RAILS_ENV=test
  - bundle exec rails db:setup

script:
  - bundle exec rubocop
  - bundle exec rails test
